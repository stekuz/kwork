<!DOCTYPE html>
<html>
    <head>
        <style>
            canvas{
                width:100%;
                left:0%;
                right:0%;
            }
        </style>
        <meta charset="utf-8">
    </head>
    <body>
        <a></a>
        <canvas></canvas>
        <script>
const
    d=200,
    game={
        p:[//фигуры
            [//красные 0
                [0,0],//король   0
                [200,0],//ферзь  1
                [400,0],//слон   2
                [600,0],//конь   3
                [800,0],//ладья  4
                [1000,0]//пешка  5
            ],
            [//зелёные 1
                [0,200],//[x,y]
                [200,200],
                [400,200],
                [600,200],
                [800,200],
                [1000,200]
            ],
            [//синие 2
                [0,400],
                [200,400],
                [400,400],
                [600,400],
                [800,400],
                [1000,400]
            ],
            [//жёлтые 3
                [0,600],
                [200,600],
                [400,600],
                [600,600],
                [800,600],
                [1000,600]
            ]
        ],
        pS:0,//размер фигуры
        bS:0,//размер доски
        s:0,//масштаб
        f:[]//фокус[x,y]
    },
    coords=[],
    width=window.screen.availWidth,
    height=window.screen.availHeight,
    canvas=document.getElementsByTagName('canvas')[0],
    board=new Image(),
    pieces=new Image(),
    focused=new Image(),
    ctx=canvas.getContext('2d');
if(width>height)game.s=height/2800;
else game.s=width/2800;
game.pS=game.s*200;
game.bS=game.s*2800;
board.src='file:///C:/Users/user/documents/chess4/images/board.png';
pieces.src='file:///C:/Users/user/documents/chess4/images/pieces.png';
focused.src='file:///C:/Users/user/documents/chess4/images/focus.png';
canvas.width=width;
canvas.height=height;
document.getElementsByTagName('a')[0].innerHTML=game.s;

canvas.addEventListener('touchstart',move,false);

function move(evt){
    evt.preventDefault();
    const e=evt.changedTouches[0];
    const x=Math.floor(e.clientX*5/game.bS);
    const y=Math.floor(e.clientY*5/game.bS);
    const c=coords[x][y];
    if(c[2][0]!==undefined)game.f=[c[0],c[1]];
}

function start(){
    for(let x=0;x<14;x++){
        coords.push([]);
        for(let y=0;y<14;y++){
            if(!(x<3&&y<3||x>10&&y<3||x<3&&y>10||x>10&&y>10))coords[x].push([x*game.pS,y*game.pS,[]]);//[x,y,фигура]   фигура[цвет,название]
            else coords[x].push([[],[],[]]);
        }
    }
    for(let i=0;i<8;i++){
        coords[i+3][12][2]=[0,5];
        coords[i+3][1][2]=[2,5];
        coords[1][i+3][2]=[1,5];
        coords[12][i+3][2]=[3,5];
    }
    coords[3][13][2]=[0,4];
    coords[10][13][2]=[0,4];
    coords[4][13][2]=[0,3];
    coords[9][13][2]=[0,3];
    coords[5][13][2]=[0,2];
    coords[8][13][2]=[0,2];
    coords[6][13][2]=[0,1];
    coords[7][13][2]=[0,0];

    coords[0][3][2]=[1,4];
    coords[0][10][2]=[1,4];
    coords[0][4][2]=[1,3];
    coords[0][9][2]=[1,3];
    coords[0][5][2]=[1,2];
    coords[0][8][2]=[1,2];
    coords[0][6][2]=[1,1];
    coords[0][7][2]=[1,0];

    coords[13][3][2]=[3,4];
    coords[13][10][2]=[3,4];
    coords[13][4][2]=[3,3];
    coords[13][9][2]=[3,3];
    coords[13][5][2]=[3,2];
    coords[13][8][2]=[3,2];
    coords[13][7][2]=[3,1];
    coords[13][6][2]=[3,0];

    coords[3][0][2]=[2,4];
    coords[10][0][2]=[2,4];
    coords[4][0][2]=[2,3];
    coords[9][0][2]=[2,3];
    coords[5][0][2]=[2,2];
    coords[8][0][2]=[2,2];
    coords[7][0][2]=[2,1];
    coords[6][0][2]=[2,0];
    setInterval(draw);
}

function draw(){
    ctx.drawImage(board,0,0,game.bS,game.bS);
    if(game.f[0]!==undefined)ctx.drawImage(focused,game.f[0],game.f[1],game.pS,game.pS);
    for(x=0;x<14;x++){
        for(y=0;y<14;y++){
            const c=coords[x][y];
            if(c[2][0]!==undefined){
                ctx.drawImage(pieces,game.p[c[2][0]][c[2][1]][0],game.p[c[2][0]][c[2][1]][1],d,d,c[0],c[1],game.pS,game.pS);
            }
        }
    }
}

start();
        </script>
    </body>
</html>